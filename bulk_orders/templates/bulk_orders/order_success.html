{% extends "_base.html" %}

{% block content %}
<dialog id="nyscModal" class="modal modal-bottom sm:modal-middle">
  <div class="modal-box relative max-w-md">
    <!-- Close button -->
    <button onclick="closeModal()" class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
    
    <!-- Modal content -->
    <div class="p-4">
      <!-- Icon -->
      <div class="flex justify-center mb-4">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-success" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </div>
      
      <h3 class="font-bold text-xl text-center mb-4">Stay Updated on NYSC Postings!</h3>
      
      <div class="space-y-4">
        <p class="text-gray-600">Join our WhatsApp community for:</p>
        
        <ul class="space-y-2 text-gray-600">
          <li class="flex items-start">
            <span class="text-success mr-2">✓</span>
            Instant state posting alerts
          </li>
          <li class="flex items-start">
            <span class="text-success mr-2">✓</span>
            Exclusive PPA opportunities
          </li>
          <li class="flex items-start">
            <span class="text-success mr-2">✓</span>
            Relocation tips & guidance
          </li>
          <li class="flex items-start">
            <span class="text-success mr-2">✓</span>
            Connect with other corp members
          </li>
        </ul>

        <div class="alert alert-success">
          <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span>Limited spots available! Join now to secure your place.</span>
        </div>

        <a href="https://chat.whatsapp.com/CozER4xHVQ99Mx9NK2ESSL" 
           target="_blank" 
           rel="noopener noreferrer"
           class="btn btn-success w-full gap-2">
          <!-- WhatsApp icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
          </svg>
          Join WhatsApp Group
        </a>
      </div>
    </div>
  </div>
  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>

<div class="container mx-auto px-4 py-8">
    <div class="max-w-2xl mx-auto">
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body text-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-16 w-16 text-success" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                
                <h2 class="text-2xl font-bold mt-4">Payment Successful!</h2>
                
                <div class="my-6 text-left">
                    <h3 class="font-semibold mb-2">Order Details:</h3>
                    <div class="space-y-2">
                        <p><strong>Order ID:</strong> {{ order.id }}</p>
                        <p><strong>Name:</strong> {{ order.full_name }}</p>
                        <p><strong>Size:</strong> {{ order.get_size_display }}</p>
                        {% if order.custom_name %}
                            <p><strong>Custom Name:</strong> {{ order.custom_name }}</p>
                        {% endif %}
                    </div>
                </div>

                <div class="alert alert-info">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <div>
                        <p>A receipt has been sent to your email: {{ order.email }}</p>
                        <p>Please check your email for the order confirmation.</p>
                    </div>
                </div>

                <div class="mt-6">
                    <a href="{% url 'pages:home' %}" class="btn btn-primary">Back to Home</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
  function showModal() {
    const modal = document.getElementById('nyscModal');
    modal.showModal();
  }

  function closeModal() {
    const modal = document.getElementById('nyscModal');
    modal.close();
  }

  // Show modal after 1.5 seconds
  setTimeout(showModal, 1500);
</script>
{% endblock %}