{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block content %}
<div id="content-main">
    <div class="module">
        <h2>YouTube Cache Status</h2>
        <div style="padding: 20px;">
            <p><strong>Last Cache Update:</strong> {{ last_cache_update|default:"Never" }}</p>
            <p><strong>Total Videos in Cache:</strong> {{ videos_count }}</p>
            
            {% if video_examples %}
            <div style="margin-top: 20px;">
                <p><strong>Recently Cached Videos:</strong></p>
                <ul style="margin-left: 20px;">
                    {% for video in video_examples %}
                    <li>{{ video.title }} (ID: {{ video.id }})</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <form action="{% url 'admin:refresh-youtube-cache' %}" method="POST" style="margin-top: 20px;">
                {% csrf_token %}
                <input type="submit" 
                       value="Refresh Cache Now" 
                       class="default"
                       style="padding: 10px 20px; font-size: 14px;"
                       onclick="return confirm('This will fetch fresh data from YouTube API. Continue?')">
            </form>
        </div>
    </div>

    <div class="help" style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px;">
        <h3 style="margin-top: 0;">About YouTube Cache</h3>
        <p>The video cache helps reduce YouTube API calls and improve performance. The cache is automatically used when:</p>
        <ul style="margin-left: 20px;">
            <li>Loading the feed page</li>
            <li>Infinite scrolling through content</li>
        </ul>
        <p style="margin-top: 10px;"><strong>Note:</strong> Only refresh when you've added new videos to your channel or need to force an update.</p>
    </div>
</div>

<style>
    .module {
        background: white;
        border: 1px solid #ddd;
        border-radius: 4px;
        margin-bottom: 20px;
    }
    .module h2 {
        background: #79aec8;
        color: white;
        padding: 8px;
        font-size: 14px;
        margin: 0;
        border-radius: 4px 4px 0 0;
    }
</style>
{% endblock %}